window.jest_html_reporters_callback__({"numFailedTestSuites":3,"numFailedTests":34,"numPassedTestSuites":2,"numPassedTests":52,"numPendingTestSuites":0,"numPendingTests":1,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":5,"numTotalTests":87,"startTime":1761493268322,"success":false,"testResults":[{"numFailingTests":0,"numPassingTests":23,"numPendingTests":1,"numTodoTests":0,"perfStats":{"end":1761493273141,"loadTestEnvironmentEnd":1761493269226,"loadTestEnvironmentStart":1761493268681,"runtime":3913,"setupAfterEnvEnd":1761493271054,"setupAfterEnvStart":1761493269748,"setupFilesEnd":1761493269228,"setupFilesStart":1761493269228,"slow":false,"start":1761493269228},"testFilePath":"D:\\api-gestion-main\\New folder\\server\\tests\\unit\\models\\Entreprise.test.js","failureMessage":null,"testResults":[{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":187,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should create a valid entreprise with minimal data","status":"passed","title":"should create a valid entreprise with minimal data"},{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":22,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should require nomEntreprise","status":"passed","title":"should require nomEntreprise"},{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":16,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should require region","status":"passed","title":"should require region"},{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":13,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should validate region enum","status":"passed","title":"should validate region enum"},{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":13,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should require ville","status":"passed","title":"should require ville"},{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":9,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should require dateCreation","status":"passed","title":"should require dateCreation"},{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":14,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should require secteurActivite","status":"passed","title":"should require secteurActivite"},{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":12,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should validate secteurActivite enum","status":"passed","title":"should validate secteurActivite enum"},{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":13,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should require sousSecteur","status":"passed","title":"should require sousSecteur"},{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":8,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should require formeJuridique","status":"passed","title":"should require formeJuridique"},{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":13,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should require numeroContribuable","status":"passed","title":"should require numeroContribuable"},{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":12,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should validate numeroContribuable format","status":"passed","title":"should validate numeroContribuable format"},{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":61,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should enforce unique numeroContribuable","status":"passed","title":"should enforce unique numeroContribuable"},{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":7,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should require contact email","status":"passed","title":"should require contact email"},{"ancestorTitles":["Entreprise Model","Schema Validation"],"duration":15,"failureMessages":[],"fullName":"Entreprise Model Schema Validation should validate contact email format","status":"passed","title":"should validate contact email format"},{"ancestorTitles":["Entreprise Model","Performance Economique Validation"],"duration":10,"failureMessages":[],"fullName":"Entreprise Model Performance Economique Validation should validate chiffreAffaires montant is not negative","status":"passed","title":"should validate chiffreAffaires montant is not negative"},{"ancestorTitles":["Entreprise Model","Performance Economique Validation"],"duration":11,"failureMessages":[],"fullName":"Entreprise Model Performance Economique Validation should validate coutsProduction montant is not negative","status":"passed","title":"should validate coutsProduction montant is not negative"},{"ancestorTitles":["Entreprise Model","Investissement Emploi Validation"],"duration":13,"failureMessages":[],"fullName":"Entreprise Model Investissement Emploi Validation should require effectifsEmployes","status":"passed","title":"should require effectifsEmployes"},{"ancestorTitles":["Entreprise Model","Innovation Digitalisation Validation"],"duration":13,"failureMessages":[],"fullName":"Entreprise Model Innovation Digitalisation Validation should validate integrationInnovation range","status":"passed","title":"should validate integrationInnovation range"},{"ancestorTitles":["Entreprise Model","Conventions Validation"],"duration":15,"failureMessages":[],"fullName":"Entreprise Model Conventions Validation should validate atteinteCiblesInvestissement range","status":"passed","title":"should validate atteinteCiblesInvestissement range"},{"ancestorTitles":["Entreprise Model","Default Values"],"duration":17,"failureMessages":[],"fullName":"Entreprise Model Default Values should set default statut to En attente","status":"passed","title":"should set default statut to En attente"},{"ancestorTitles":["Entreprise Model","Default Values"],"duration":15,"failureMessages":[],"fullName":"Entreprise Model Default Values should set default conformite to Non vérifié","status":"passed","title":"should set default conformite to Non vérifié"},{"ancestorTitles":["Entreprise Model","Default Values"],"duration":20,"failureMessages":[],"fullName":"Entreprise Model Default Values should set default informationsCompletes to false","status":"passed","title":"should set default informationsCompletes to false"},{"ancestorTitles":["Entreprise Model","Virtual Properties"],"duration":null,"failureMessages":[],"fullName":"Entreprise Model Virtual Properties should populate conventionsActives virtual","status":"pending","title":"should populate conventionsActives virtual"}]},{"numFailingTests":0,"numPassingTests":20,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1761493275962,"loadTestEnvironmentEnd":1761493269218,"loadTestEnvironmentStart":1761493268665,"runtime":6742,"setupAfterEnvEnd":1761493271113,"setupAfterEnvStart":1761493269756,"setupFilesEnd":1761493269220,"setupFilesStart":1761493269220,"slow":true,"start":1761493269220},"testFilePath":"D:\\api-gestion-main\\New folder\\server\\tests\\unit\\models\\User.test.js","failureMessage":null,"testResults":[{"ancestorTitles":["User Model","Schema Validation"],"duration":416,"failureMessages":[],"fullName":"User Model Schema Validation should create a valid user","status":"passed","title":"should create a valid user"},{"ancestorTitles":["User Model","Schema Validation"],"duration":19,"failureMessages":[],"fullName":"User Model Schema Validation should require nom field","status":"passed","title":"should require nom field"},{"ancestorTitles":["User Model","Schema Validation"],"duration":14,"failureMessages":[],"fullName":"User Model Schema Validation should require prenom field","status":"passed","title":"should require prenom field"},{"ancestorTitles":["User Model","Schema Validation"],"duration":12,"failureMessages":[],"fullName":"User Model Schema Validation should require email field","status":"passed","title":"should require email field"},{"ancestorTitles":["User Model","Schema Validation"],"duration":9,"failureMessages":[],"fullName":"User Model Schema Validation should require valid email format","status":"passed","title":"should require valid email format"},{"ancestorTitles":["User Model","Schema Validation"],"duration":10,"failureMessages":[],"fullName":"User Model Schema Validation should require motDePasse field","status":"passed","title":"should require motDePasse field"},{"ancestorTitles":["User Model","Schema Validation"],"duration":13,"failureMessages":[],"fullName":"User Model Schema Validation should enforce minimum password length","status":"passed","title":"should enforce minimum password length"},{"ancestorTitles":["User Model","Schema Validation"],"duration":366,"failureMessages":[],"fullName":"User Model Schema Validation should enforce unique email","status":"passed","title":"should enforce unique email"},{"ancestorTitles":["User Model","Schema Validation"],"duration":16,"failureMessages":[],"fullName":"User Model Schema Validation should validate role enum","status":"passed","title":"should validate role enum"},{"ancestorTitles":["User Model","Schema Validation"],"duration":5,"failureMessages":[],"fullName":"User Model Schema Validation should validate typeCompte enum","status":"passed","title":"should validate typeCompte enum"},{"ancestorTitles":["User Model","Password Hashing"],"duration":119,"failureMessages":[],"fullName":"User Model Password Hashing should hash password before saving","status":"passed","title":"should hash password before saving"},{"ancestorTitles":["User Model","Password Hashing"],"duration":130,"failureMessages":[],"fullName":"User Model Password Hashing should not hash password if not modified","status":"passed","title":"should not hash password if not modified"},{"ancestorTitles":["User Model","Instance Methods"],"duration":437,"failureMessages":[],"fullName":"User Model Instance Methods should compare password correctly","status":"passed","title":"should compare password correctly"},{"ancestorTitles":["User Model","Instance Methods"],"duration":159,"failureMessages":[],"fullName":"User Model Instance Methods should return public profile without password","status":"passed","title":"should return public profile without password"},{"ancestorTitles":["User Model","Instance Methods"],"duration":140,"failureMessages":[],"fullName":"User Model Instance Methods should check if user is admin","status":"passed","title":"should check if user is admin"},{"ancestorTitles":["User Model","Virtual Properties"],"duration":133,"failureMessages":[],"fullName":"User Model Virtual Properties should return full name","status":"passed","title":"should return full name"},{"ancestorTitles":["User Model","Static Methods"],"duration":163,"failureMessages":[],"fullName":"User Model Static Methods should find user by email (case insensitive)","status":"passed","title":"should find user by email (case insensitive)"},{"ancestorTitles":["User Model","Default Values"],"duration":166,"failureMessages":[],"fullName":"User Model Default Values should set default role to user","status":"passed","title":"should set default role to user"},{"ancestorTitles":["User Model","Default Values"],"duration":261,"failureMessages":[],"fullName":"User Model Default Values should set default status to active","status":"passed","title":"should set default status to active"},{"ancestorTitles":["User Model","Default Values"],"duration":189,"failureMessages":[],"fullName":"User Model Default Values should set default entrepriseIncomplete to false","status":"passed","title":"should set default entrepriseIncomplete to false"}]},{"numFailingTests":11,"numPassingTests":1,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1761493277552,"loadTestEnvironmentEnd":1761493269207,"loadTestEnvironmentStart":1761493268665,"runtime":8343,"setupAfterEnvEnd":1761493271062,"setupAfterEnvStart":1761493269740,"setupFilesEnd":1761493269209,"setupFilesStart":1761493269209,"slow":true,"start":1761493269209},"testFilePath":"D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.register.test.js","failureMessage":"  ● Auth Registration Integration Tests › POST /api/auth/register › should register a new entreprise user successfully\n\n    expected 201 \"Created\", got 500 \"Internal Server Error\"\n\n      25 |         .post('/api/auth/register')\n      26 |         .send(userData)\n    > 27 |         .expect(201);\n         |          ^\n      28 |\n      29 |       expect(response.body.success).toBe(true);\n      30 |       expect(response.body.message).toContain('Utilisateur créé avec succès');\n\n      at Object.expect (tests/integration/auth/auth.register.test.js:27:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Auth Registration Integration Tests › POST /api/auth/register › should register a new admin user successfully\n\n    expect(received).toBeUndefined()\n\n    Received: null\n\n      66 |       expect(response.body.data.user.typeCompte).toBe('admin');\n      67 |       expect(response.body.data.user.role).toBe('admin');\n    > 68 |       expect(response.body.data.user.entrepriseId).toBeUndefined();\n         |                                                    ^\n      69 |\n      70 |       // Verify user was created in database\n      71 |       const user = await User.findOne({ email: userData.email });\n\n      at Object.toBeUndefined (tests/integration/auth/auth.register.test.js:68:52)\n\n  ● Auth Registration Integration Tests › POST /api/auth/register › should reject registration with invalid email format\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\n      114 |         .post('/api/auth/register')\n      115 |         .send(userData)\n    > 116 |         .expect(400);\n          |          ^\n      117 |\n      118 |       expect(response.body.success).toBe(false);\n      119 |       expect(response.body.message).toContain('Veuillez entrer un email valide');\n\n      at Object.expect (tests/integration/auth/auth.register.test.js:116:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Auth Registration Integration Tests › POST /api/auth/register › should reject registration with short password\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\n      132 |         .post('/api/auth/register')\n      133 |         .send(userData)\n    > 134 |         .expect(400);\n          |          ^\n      135 |\n      136 |       expect(response.body.success).toBe(false);\n      137 |       expect(response.body.message).toContain('Le mot de passe doit contenir au moins 6 caractères');\n\n      at Object.expect (tests/integration/auth/auth.register.test.js:134:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Auth Registration Integration Tests › POST /api/auth/register › should reject registration with missing required fields\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\n      148 |         .post('/api/auth/register')\n      149 |         .send(userData)\n    > 150 |         .expect(400);\n          |          ^\n      151 |\n      152 |       expect(response.body.success).toBe(false);\n      153 |     });\n\n      at Object.expect (tests/integration/auth/auth.register.test.js:150:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Auth Registration Integration Tests › POST /api/auth/register › should create entreprise with default values for entreprise user\n\n    expected 201 \"Created\", got 500 \"Internal Server Error\"\n\n      165 |         .post('/api/auth/register')\n      166 |         .send(userData)\n    > 167 |         .expect(201);\n          |          ^\n      168 |\n      169 |       const user = await User.findOne({ email: userData.email });\n      170 |       const entreprise = await Entreprise.findById(user.entrepriseId);\n\n      at Object.expect (tests/integration/auth/auth.register.test.js:167:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Auth Registration Integration Tests › POST /api/auth/register › should hash password before saving\n\n    expected 201 \"Created\", got 500 \"Internal Server Error\"\n\n      192 |         .post('/api/auth/register')\n      193 |         .send(userData)\n    > 194 |         .expect(201);\n          |          ^\n      195 |\n      196 |       const user = await User.findOne({ email: userData.email });\n      197 |       expect(user.motDePasse).not.toBe(userData.password);\n\n      at Object.expect (tests/integration/auth/auth.register.test.js:194:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Auth Registration Integration Tests › POST /api/auth/register › should set default role to user for entreprise account\n\n    expected 201 \"Created\", got 500 \"Internal Server Error\"\n\n      211 |         .post('/api/auth/register')\n      212 |         .send(userData)\n    > 213 |         .expect(201);\n          |          ^\n      214 |\n      215 |       const user = await User.findOne({ email: userData.email });\n      216 |       expect(user.role).toBe('user');\n\n      at Object.expect (tests/integration/auth/auth.register.test.js:213:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Auth Registration Integration Tests › POST /api/auth/register › should set entrepriseIncomplete to true for entreprise user\n\n    expected 201 \"Created\", got 500 \"Internal Server Error\"\n\n      229 |         .post('/api/auth/register')\n      230 |         .send(userData)\n    > 231 |         .expect(201);\n          |          ^\n      232 |\n      233 |       const user = await User.findOne({ email: userData.email });\n      234 |       expect(user.entrepriseIncomplete).toBe(true);\n\n      at Object.expect (tests/integration/auth/auth.register.test.js:231:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Auth Registration Integration Tests › POST /api/auth/register › should generate unique numeroContribuable for entreprise\n\n    expected 201 \"Created\", got 500 \"Internal Server Error\"\n\n      247 |         .post('/api/auth/register')\n      248 |         .send(userData)\n    > 249 |         .expect(201);\n          |          ^\n      250 |\n      251 |       const user = await User.findOne({ email: userData.email });\n      252 |       const entreprise = await Entreprise.findById(user.entrepriseId);\n\n      at Object.expect (tests/integration/auth/auth.register.test.js:249:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Auth Registration Integration Tests › POST /api/auth/register › should handle registration with special characters in names\n\n    expected 201 \"Created\", got 500 \"Internal Server Error\"\n\n      267 |         .post('/api/auth/register')\n      268 |         .send(userData)\n    > 269 |         .expect(201);\n          |          ^\n      270 |\n      271 |       expect(response.body.success).toBe(true);\n      272 |       expect(response.body.data.user.nom).toBe('Test-Name');\n\n      at Object.expect (tests/integration/auth/auth.register.test.js:269:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n","testResults":[{"ancestorTitles":["Auth Registration Integration Tests","POST /api/auth/register"],"duration":831,"failureMessages":["Error: expected 201 \"Created\", got 500 \"Internal Server Error\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.register.test.js:27:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Auth Registration Integration Tests POST /api/auth/register should register a new entreprise user successfully","status":"failed","title":"should register a new entreprise user successfully"},{"ancestorTitles":["Auth Registration Integration Tests","POST /api/auth/register"],"duration":646,"failureMessages":["Error: expect(received).toBeUndefined()\n\nReceived: null\n    at Object.toBeUndefined (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.register.test.js:68:52)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Auth Registration Integration Tests POST /api/auth/register should register a new admin user successfully","status":"failed","title":"should register a new admin user successfully"},{"ancestorTitles":["Auth Registration Integration Tests","POST /api/auth/register"],"duration":296,"failureMessages":[],"fullName":"Auth Registration Integration Tests POST /api/auth/register should reject registration with existing email","status":"passed","title":"should reject registration with existing email"},{"ancestorTitles":["Auth Registration Integration Tests","POST /api/auth/register"],"duration":48,"failureMessages":["Error: expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.register.test.js:116:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Auth Registration Integration Tests POST /api/auth/register should reject registration with invalid email format","status":"failed","title":"should reject registration with invalid email format"},{"ancestorTitles":["Auth Registration Integration Tests","POST /api/auth/register"],"duration":43,"failureMessages":["Error: expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.register.test.js:134:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Auth Registration Integration Tests POST /api/auth/register should reject registration with short password","status":"failed","title":"should reject registration with short password"},{"ancestorTitles":["Auth Registration Integration Tests","POST /api/auth/register"],"duration":61,"failureMessages":["Error: expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.register.test.js:150:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Auth Registration Integration Tests POST /api/auth/register should reject registration with missing required fields","status":"failed","title":"should reject registration with missing required fields"},{"ancestorTitles":["Auth Registration Integration Tests","POST /api/auth/register"],"duration":45,"failureMessages":["Error: expected 201 \"Created\", got 500 \"Internal Server Error\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.register.test.js:167:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Auth Registration Integration Tests POST /api/auth/register should create entreprise with default values for entreprise user","status":"failed","title":"should create entreprise with default values for entreprise user"},{"ancestorTitles":["Auth Registration Integration Tests","POST /api/auth/register"],"duration":42,"failureMessages":["Error: expected 201 \"Created\", got 500 \"Internal Server Error\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.register.test.js:194:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Auth Registration Integration Tests POST /api/auth/register should hash password before saving","status":"failed","title":"should hash password before saving"},{"ancestorTitles":["Auth Registration Integration Tests","POST /api/auth/register"],"duration":55,"failureMessages":["Error: expected 201 \"Created\", got 500 \"Internal Server Error\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.register.test.js:213:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Auth Registration Integration Tests POST /api/auth/register should set default role to user for entreprise account","status":"failed","title":"should set default role to user for entreprise account"},{"ancestorTitles":["Auth Registration Integration Tests","POST /api/auth/register"],"duration":89,"failureMessages":["Error: expected 201 \"Created\", got 500 \"Internal Server Error\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.register.test.js:231:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Auth Registration Integration Tests POST /api/auth/register should set entrepriseIncomplete to true for entreprise user","status":"failed","title":"should set entrepriseIncomplete to true for entreprise user"},{"ancestorTitles":["Auth Registration Integration Tests","POST /api/auth/register"],"duration":67,"failureMessages":["Error: expected 201 \"Created\", got 500 \"Internal Server Error\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.register.test.js:249:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Auth Registration Integration Tests POST /api/auth/register should generate unique numeroContribuable for entreprise","status":"failed","title":"should generate unique numeroContribuable for entreprise"},{"ancestorTitles":["Auth Registration Integration Tests","POST /api/auth/register"],"duration":63,"failureMessages":["Error: expected 201 \"Created\", got 500 \"Internal Server Error\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.register.test.js:269:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Auth Registration Integration Tests POST /api/auth/register should handle registration with special characters in names","status":"failed","title":"should handle registration with special characters in names"}]},{"numFailingTests":6,"numPassingTests":6,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1761493280503,"loadTestEnvironmentEnd":1761493269180,"loadTestEnvironmentStart":1761493268649,"runtime":11321,"setupAfterEnvEnd":1761493271043,"setupAfterEnvStart":1761493269710,"setupFilesEnd":1761493269182,"setupFilesStart":1761493269182,"slow":true,"start":1761493269182},"testFilePath":"D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.login.test.js","failureMessage":"  ● Auth Login Integration Tests › POST /api/auth/login › should login with valid credentials\n\n    expect(received).toContain(expected) // indexOf\n\n    Matcher error: received value must not be null nor undefined\n\n    Received has value: undefined\n\n      33 |\n      34 |       expect(response.body.success).toBe(true);\n    > 35 |       expect(response.body.message).toContain('Connexion réussie');\n         |                                     ^\n      36 |       expect(response.body.data.user.email).toBe(loginData.email);\n      37 |       expect(response.body.data.token).toBeDefined();\n      38 |       expect(response.body.data.user.motDePasse).toBeUndefined(); // Password should not be returned\n\n      at Object.toContain (tests/integration/auth/auth.login.test.js:35:37)\n\n  ● Auth Login Integration Tests › POST /api/auth/login › should login admin user successfully\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n      63 |       expect(response.body.data.user.role).toBe('admin');\n      64 |       expect(response.body.data.user.typeCompte).toBe('admin');\n    > 65 |       expect(response.body.data.token).toBeDefined();\n         |                                        ^\n      66 |     });\n      67 |\n      68 |     it('should login entreprise user with entreprise data', async () => {\n\n      at Object.toBeDefined (tests/integration/auth/auth.login.test.js:65:40)\n\n  ● Auth Login Integration Tests › POST /api/auth/login › should login entreprise user with entreprise data\n\n    ValidationError: Entreprise validation failed: investissementEmploi.effectifsEmployes: Le nombre d'employés est requis\n\n      at model.Document.invalidate (node_modules/mongoose/lib/document.js:3358:32)\n      at node_modules/mongoose/lib/document.js:3119:17\n      at node_modules/mongoose/lib/schemaType.js:1416:9\n\n  ● Auth Login Integration Tests › POST /api/auth/login › should return JWT token with correct payload\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n      220 |\n      221 |       const token = response.body.data.token;\n    > 222 |       expect(token).toBeDefined();\n          |                     ^\n      223 |\n      224 |       // Verify JWT token can be decoded\n      225 |       const jwt = require('jsonwebtoken');\n\n      at Object.toBeDefined (tests/integration/auth/auth.login.test.js:222:21)\n\n  ● Auth Login Integration Tests › POST /api/auth/login › should handle inactive user\n\n    expected 401 \"Unauthorized\", got 200 \"OK\"\n\n      272 |         .post('/api/auth/login')\n      273 |         .send(loginData)\n    > 274 |         .expect(401);\n          |          ^\n      275 |\n      276 |       expect(response.body.success).toBe(false);\n      277 |       expect(response.body.message).toContain('Compte inactif');\n\n      at Object.expect (tests/integration/auth/auth.login.test.js:274:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Auth Login Integration Tests › POST /api/auth/login › should handle pending user\n\n    expected 401 \"Unauthorized\", got 200 \"OK\"\n\n      297 |         .post('/api/auth/login')\n      298 |         .send(loginData)\n    > 299 |         .expect(401);\n          |          ^\n      300 |\n      301 |       expect(response.body.success).toBe(false);\n      302 |       expect(response.body.message).toContain('Compte en attente');\n\n      at Object.expect (tests/integration/auth/auth.login.test.js:299:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n","testResults":[{"ancestorTitles":["Auth Login Integration Tests","POST /api/auth/login"],"duration":1602,"failureMessages":["Error: expect(received).toContain(expected) // indexOf\n\nMatcher error: received value must not be null nor undefined\n\nReceived has value: undefined\n    at Object.toContain (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.login.test.js:35:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Auth Login Integration Tests POST /api/auth/login should login with valid credentials","status":"failed","title":"should login with valid credentials"},{"ancestorTitles":["Auth Login Integration Tests","POST /api/auth/login"],"duration":503,"failureMessages":["Error: expect(received).toBeDefined()\n\nReceived: undefined\n    at Object.toBeDefined (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.login.test.js:65:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Auth Login Integration Tests POST /api/auth/login should login admin user successfully","status":"failed","title":"should login admin user successfully"},{"ancestorTitles":["Auth Login Integration Tests","POST /api/auth/login"],"duration":46,"failureMessages":["ValidationError: Entreprise validation failed: investissementEmploi.effectifsEmployes: Le nombre d'employés est requis\n    at model.Document.invalidate (D:\\api-gestion-main\\New folder\\server\\node_modules\\mongoose\\lib\\document.js:3358:32)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\mongoose\\lib\\document.js:3119:17\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\mongoose\\lib\\schemaType.js:1416:9\n    at processTicksAndRejections (node:internal/process/task_queues:85:11)"],"fullName":"Auth Login Integration Tests POST /api/auth/login should login entreprise user with entreprise data","status":"failed","title":"should login entreprise user with entreprise data"},{"ancestorTitles":["Auth Login Integration Tests","POST /api/auth/login"],"duration":80,"failureMessages":[],"fullName":"Auth Login Integration Tests POST /api/auth/login should reject login with invalid email","status":"passed","title":"should reject login with invalid email"},{"ancestorTitles":["Auth Login Integration Tests","POST /api/auth/login"],"duration":491,"failureMessages":[],"fullName":"Auth Login Integration Tests POST /api/auth/login should reject login with invalid password","status":"passed","title":"should reject login with invalid password"},{"ancestorTitles":["Auth Login Integration Tests","POST /api/auth/login"],"duration":59,"failureMessages":[],"fullName":"Auth Login Integration Tests POST /api/auth/login should reject login with missing email","status":"passed","title":"should reject login with missing email"},{"ancestorTitles":["Auth Login Integration Tests","POST /api/auth/login"],"duration":54,"failureMessages":[],"fullName":"Auth Login Integration Tests POST /api/auth/login should reject login with missing password","status":"passed","title":"should reject login with missing password"},{"ancestorTitles":["Auth Login Integration Tests","POST /api/auth/login"],"duration":467,"failureMessages":[],"fullName":"Auth Login Integration Tests POST /api/auth/login should handle case insensitive email","status":"passed","title":"should handle case insensitive email"},{"ancestorTitles":["Auth Login Integration Tests","POST /api/auth/login"],"duration":500,"failureMessages":["Error: expect(received).toBeDefined()\n\nReceived: undefined\n    at Object.toBeDefined (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.login.test.js:222:21)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Auth Login Integration Tests POST /api/auth/login should return JWT token with correct payload","status":"failed","title":"should return JWT token with correct payload"},{"ancestorTitles":["Auth Login Integration Tests","POST /api/auth/login"],"duration":510,"failureMessages":[],"fullName":"Auth Login Integration Tests POST /api/auth/login should not return password in response","status":"passed","title":"should not return password in response"},{"ancestorTitles":["Auth Login Integration Tests","POST /api/auth/login"],"duration":588,"failureMessages":["Error: expected 401 \"Unauthorized\", got 200 \"OK\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.login.test.js:274:10)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Auth Login Integration Tests POST /api/auth/login should handle inactive user","status":"failed","title":"should handle inactive user"},{"ancestorTitles":["Auth Login Integration Tests","POST /api/auth/login"],"duration":521,"failureMessages":["Error: expected 401 \"Unauthorized\", got 200 \"OK\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\auth\\auth.login.test.js:299:10)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Auth Login Integration Tests POST /api/auth/login should handle pending user","status":"failed","title":"should handle pending user"}]},{"numFailingTests":17,"numPassingTests":2,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1761493285053,"loadTestEnvironmentEnd":1761493269181,"loadTestEnvironmentStart":1761493268634,"runtime":15870,"setupAfterEnvEnd":1761493271073,"setupAfterEnvStart":1761493269735,"setupFilesEnd":1761493269183,"setupFilesStart":1761493269183,"slow":true,"start":1761493269183},"testFilePath":"D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js","failureMessage":"  ● Tests d'Intégration CRUD Entreprise › GET /api/entreprises › devrait obtenir toutes les entreprises pour l'administrateur\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: undefined\n\n      70 |         .expect(200);\n      71 |\n    > 72 |       expect(response.body.success).toBe(true);\n         |                                     ^\n      73 |       expect(response.body.data).toBeDefined();\n      74 |       expect(Array.isArray(response.body.data)).toBe(true);\n      75 |       expect(response.body.data.length).toBeGreaterThan(0);\n\n      at Object.toBe (tests/integration/entreprises/entreprise.crud.test.js:72:37)\n\n  ● Tests d'Intégration CRUD Entreprise › GET /api/entreprises › devrait filtrer les entreprises par statut\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: undefined\n\n      103 |         .expect(200);\n      104 |\n    > 105 |       expect(response.body.success).toBe(true);\n          |                                     ^\n      106 |       expect(response.body.data.every(ent => ent.statut === 'En attente')).toBe(true);\n      107 |     });\n      108 |\n\n      at Object.toBe (tests/integration/entreprises/entreprise.crud.test.js:105:37)\n\n  ● Tests d'Intégration CRUD Entreprise › GET /api/entreprises › devrait filtrer les entreprises par région\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: undefined\n\n      113 |         .expect(200);\n      114 |\n    > 115 |       expect(response.body.success).toBe(true);\n          |                                     ^\n      116 |       expect(response.body.data.every(ent => ent.identification.region === 'Centre')).toBe(true);\n      117 |     });\n      118 |\n\n      at Object.toBe (tests/integration/entreprises/entreprise.crud.test.js:115:37)\n\n  ● Tests d'Intégration CRUD Entreprise › GET /api/entreprises › devrait exiger une authentification\n\n    expected 401 \"Unauthorized\", got 200 \"OK\"\n\n      120 |       const response = await request(app)\n      121 |         .get('/api/entreprises')\n    > 122 |         .expect(401);\n          |          ^\n      123 |\n      124 |       expect(response.body.success).toBe(false);\n      125 |       expect(response.body.message).toContain('Non autorisé');\n\n      at Object.expect (tests/integration/entreprises/entreprise.crud.test.js:122:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Tests d'Intégration CRUD Entreprise › GET /api/entreprises › devrait exiger le rôle administrateur\n\n    expected 403 \"Forbidden\", got 200 \"OK\"\n\n      132 |         .get('/api/entreprises')\n      133 |         .set('Authorization', `Bearer ${userToken}`)\n    > 134 |         .expect(403);\n          |          ^\n      135 |\n      136 |       expect(response.body.success).toBe(false);\n      137 |       expect(response.body.message).toContain('Accès refusé');\n\n      at Object.expect (tests/integration/entreprises/entreprise.crud.test.js:134:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Tests d'Intégration CRUD Entreprise › GET /api/entreprises/:id › devrait obtenir une entreprise par ID pour l'administrateur\n\n    expected 200 \"OK\", got 401 \"Unauthorized\"\n\n      144 |         .get(`/api/entreprises/${entreprise._id}`)\n      145 |         .set('Authorization', `Bearer ${authToken}`)\n    > 146 |         .expect(200);\n          |          ^\n      147 |\n      148 |       expect(response.body.success).toBe(true);\n      149 |       expect(response.body.data._id).toBe(entreprise._id.toString());\n\n      at Object.expect (tests/integration/entreprises/entreprise.crud.test.js:146:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Tests d'Intégration CRUD Entreprise › GET /api/entreprises/:id › devrait obtenir sa propre entreprise pour l'utilisateur entreprise\n\n    expected 200 \"OK\", got 401 \"Unauthorized\"\n\n      157 |         .get(`/api/entreprises/${entreprise._id}`)\n      158 |         .set('Authorization', `Bearer ${userToken}`)\n    > 159 |         .expect(200);\n          |          ^\n      160 |\n      161 |       expect(response.body.success).toBe(true);\n      162 |       expect(response.body.data._id).toBe(entreprise._id.toString());\n\n      at Object.expect (tests/integration/entreprises/entreprise.crud.test.js:159:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Tests d'Intégration CRUD Entreprise › GET /api/entreprises/:id › ne devrait pas permettre à un utilisateur entreprise d'accéder à d'autres entreprises\n\n    expected 403 \"Forbidden\", got 401 \"Unauthorized\"\n\n      189 |         .get(`/api/entreprises/${otherEntreprise._id}`)\n      190 |         .set('Authorization', `Bearer ${userToken}`)\n    > 191 |         .expect(403);\n          |          ^\n      192 |\n      193 |       expect(response.body.success).toBe(false);\n      194 |       expect(response.body.message).toContain('Accès refusé');\n\n      at Object.expect (tests/integration/entreprises/entreprise.crud.test.js:191:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Tests d'Intégration CRUD Entreprise › GET /api/entreprises/:id › devrait retourner 404 pour une entreprise inexistante\n\n    expected 404 \"Not Found\", got 401 \"Unauthorized\"\n\n      201 |         .get(`/api/entreprises/${fakeId}`)\n      202 |         .set('Authorization', `Bearer ${authToken}`)\n    > 203 |         .expect(404);\n          |          ^\n      204 |\n      205 |       expect(response.body.success).toBe(false);\n      206 |       expect(response.body.message).toContain('Entreprise non trouvée');\n\n      at Object.expect (tests/integration/entreprises/entreprise.crud.test.js:203:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Tests d'Intégration CRUD Entreprise › PUT /api/entreprises/:id › devrait mettre à jour une entreprise pour l'administrateur\n\n    expected 200 \"OK\", got 401 \"Unauthorized\"\n\n      223 |         .set('Authorization', `Bearer ${authToken}`)\n      224 |         .send(updateData)\n    > 225 |         .expect(200);\n          |          ^\n      226 |\n      227 |       expect(response.body.success).toBe(true);\n      228 |       expect(response.body.data.identification.nomEntreprise).toBe('Updated Entreprise Name');\n\n      at Object.expect (tests/integration/entreprises/entreprise.crud.test.js:225:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Tests d'Intégration CRUD Entreprise › PUT /api/entreprises/:id › devrait mettre à jour sa propre entreprise pour l'utilisateur entreprise\n\n    expected 200 \"OK\", got 401 \"Unauthorized\"\n\n      244 |         .set('Authorization', `Bearer ${userToken}`)\n      245 |         .send(updateData)\n    > 246 |         .expect(200);\n          |          ^\n      247 |\n      248 |       expect(response.body.success).toBe(true);\n      249 |       expect(response.body.data.identification.nomEntreprise).toBe('My Updated Entreprise');\n\n      at Object.expect (tests/integration/entreprises/entreprise.crud.test.js:246:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Tests d'Intégration CRUD Entreprise › PUT /api/entreprises/:id › ne devrait pas permettre à un utilisateur entreprise de mettre à jour d'autres entreprises\n\n    expected 403 \"Forbidden\", got 401 \"Unauthorized\"\n\n      282 |         .set('Authorization', `Bearer ${userToken}`)\n      283 |         .send(updateData)\n    > 284 |         .expect(403);\n          |          ^\n      285 |\n      286 |       expect(response.body.success).toBe(false);\n      287 |     });\n\n      at Object.expect (tests/integration/entreprises/entreprise.crud.test.js:284:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Tests d'Intégration CRUD Entreprise › PUT /api/entreprises/:id › devrait valider les champs obligatoires\n\n    expected 400 \"Bad Request\", got 401 \"Unauthorized\"\n\n      299 |         .set('Authorization', `Bearer ${authToken}`)\n      300 |         .send(updateData)\n    > 301 |         .expect(400);\n          |          ^\n      302 |\n      303 |       expect(response.body.success).toBe(false);\n      304 |     });\n\n      at Object.expect (tests/integration/entreprises/entreprise.crud.test.js:301:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Tests d'Intégration CRUD Entreprise › POST /api/entreprises › devrait créer une nouvelle entreprise pour l'administrateur\n\n    TypeError: Cannot read properties of undefined (reading 'identification')\n\n      333 |\n      334 |       expect(response.body.success).toBe(true);\n    > 335 |       expect(response.body.data.identification.nomEntreprise).toBe('New Entreprise');\n          |                                 ^\n      336 |       expect(response.body.data.statut).toBe('En attente');\n      337 |     });\n      338 |\n\n      at Object.identification (tests/integration/entreprises/entreprise.crud.test.js:335:33)\n\n  ● Tests d'Intégration CRUD Entreprise › POST /api/entreprises › ne devrait pas permettre à un utilisateur entreprise de créer des entreprises\n\n    expected 403 \"Forbidden\", got 201 \"Created\"\n\n      363 |         .set('Authorization', `Bearer ${userToken}`)\n      364 |         .send(newEntrepriseData)\n    > 365 |         .expect(403);\n          |          ^\n      366 |\n      367 |       expect(response.body.success).toBe(false);\n      368 |     });\n\n      at Object.expect (tests/integration/entreprises/entreprise.crud.test.js:365:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Tests d'Intégration CRUD Entreprise › POST /api/entreprises › devrait valider les champs obligatoires pour la création\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\n      380 |         .set('Authorization', `Bearer ${authToken}`)\n      381 |         .send(incompleteData)\n    > 382 |         .expect(400);\n          |          ^\n      383 |\n      384 |       expect(response.body.success).toBe(false);\n      385 |     });\n\n      at Object.expect (tests/integration/entreprises/entreprise.crud.test.js:382:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● Tests d'Intégration CRUD Entreprise › DELETE /api/entreprises/:id › ne devrait pas permettre à un utilisateur entreprise de supprimer des entreprises\n\n    expected 403 \"Forbidden\", got 200 \"OK\"\n\n      407 |         .delete(`/api/entreprises/${entreprise._id}`)\n      408 |         .set('Authorization', `Bearer ${userToken}`)\n    > 409 |         .expect(403);\n          |          ^\n      410 |\n      411 |       expect(response.body.success).toBe(false);\n      412 |     });\n\n      at Object.expect (tests/integration/entreprises/entreprise.crud.test.js:409:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n","testResults":[{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","GET /api/entreprises"],"duration":1501,"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: undefined\n    at Object.toBe (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:72:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Tests d'Intégration CRUD Entreprise GET /api/entreprises devrait obtenir toutes les entreprises pour l'administrateur","status":"failed","title":"devrait obtenir toutes les entreprises pour l'administrateur"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","GET /api/entreprises"],"duration":543,"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: undefined\n    at Object.toBe (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:105:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Tests d'Intégration CRUD Entreprise GET /api/entreprises devrait filtrer les entreprises par statut","status":"failed","title":"devrait filtrer les entreprises par statut"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","GET /api/entreprises"],"duration":519,"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: undefined\n    at Object.toBe (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:115:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Tests d'Intégration CRUD Entreprise GET /api/entreprises devrait filtrer les entreprises par région","status":"failed","title":"devrait filtrer les entreprises par région"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","GET /api/entreprises"],"duration":470,"failureMessages":["Error: expected 401 \"Unauthorized\", got 200 \"OK\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:122:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Tests d'Intégration CRUD Entreprise GET /api/entreprises devrait exiger une authentification","status":"failed","title":"devrait exiger une authentification"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","GET /api/entreprises"],"duration":544,"failureMessages":["Error: expected 403 \"Forbidden\", got 200 \"OK\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:134:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Tests d'Intégration CRUD Entreprise GET /api/entreprises devrait exiger le rôle administrateur","status":"failed","title":"devrait exiger le rôle administrateur"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","GET /api/entreprises/:id"],"duration":583,"failureMessages":["Error: expected 200 \"OK\", got 401 \"Unauthorized\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:146:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Tests d'Intégration CRUD Entreprise GET /api/entreprises/:id devrait obtenir une entreprise par ID pour l'administrateur","status":"failed","title":"devrait obtenir une entreprise par ID pour l'administrateur"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","GET /api/entreprises/:id"],"duration":523,"failureMessages":["Error: expected 200 \"OK\", got 401 \"Unauthorized\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:159:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Tests d'Intégration CRUD Entreprise GET /api/entreprises/:id devrait obtenir sa propre entreprise pour l'utilisateur entreprise","status":"failed","title":"devrait obtenir sa propre entreprise pour l'utilisateur entreprise"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","GET /api/entreprises/:id"],"duration":495,"failureMessages":["Error: expected 403 \"Forbidden\", got 401 \"Unauthorized\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:191:10)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Tests d'Intégration CRUD Entreprise GET /api/entreprises/:id ne devrait pas permettre à un utilisateur entreprise d'accéder à d'autres entreprises","status":"failed","title":"ne devrait pas permettre à un utilisateur entreprise d'accéder à d'autres entreprises"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","GET /api/entreprises/:id"],"duration":407,"failureMessages":["Error: expected 404 \"Not Found\", got 401 \"Unauthorized\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:203:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Tests d'Intégration CRUD Entreprise GET /api/entreprises/:id devrait retourner 404 pour une entreprise inexistante","status":"failed","title":"devrait retourner 404 pour une entreprise inexistante"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","PUT /api/entreprises/:id"],"duration":467,"failureMessages":["Error: expected 200 \"OK\", got 401 \"Unauthorized\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:225:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Tests d'Intégration CRUD Entreprise PUT /api/entreprises/:id devrait mettre à jour une entreprise pour l'administrateur","status":"failed","title":"devrait mettre à jour une entreprise pour l'administrateur"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","PUT /api/entreprises/:id"],"duration":783,"failureMessages":["Error: expected 200 \"OK\", got 401 \"Unauthorized\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:246:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Tests d'Intégration CRUD Entreprise PUT /api/entreprises/:id devrait mettre à jour sa propre entreprise pour l'utilisateur entreprise","status":"failed","title":"devrait mettre à jour sa propre entreprise pour l'utilisateur entreprise"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","PUT /api/entreprises/:id"],"duration":315,"failureMessages":["Error: expected 403 \"Forbidden\", got 401 \"Unauthorized\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:284:10)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Tests d'Intégration CRUD Entreprise PUT /api/entreprises/:id ne devrait pas permettre à un utilisateur entreprise de mettre à jour d'autres entreprises","status":"failed","title":"ne devrait pas permettre à un utilisateur entreprise de mettre à jour d'autres entreprises"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","PUT /api/entreprises/:id"],"duration":352,"failureMessages":["Error: expected 400 \"Bad Request\", got 401 \"Unauthorized\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:301:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Tests d'Intégration CRUD Entreprise PUT /api/entreprises/:id devrait valider les champs obligatoires","status":"failed","title":"devrait valider les champs obligatoires"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","POST /api/entreprises"],"duration":517,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'identification')\n    at Object.identification (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:335:33)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Tests d'Intégration CRUD Entreprise POST /api/entreprises devrait créer une nouvelle entreprise pour l'administrateur","status":"failed","title":"devrait créer une nouvelle entreprise pour l'administrateur"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","POST /api/entreprises"],"duration":351,"failureMessages":["Error: expected 403 \"Forbidden\", got 201 \"Created\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:365:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Tests d'Intégration CRUD Entreprise POST /api/entreprises ne devrait pas permettre à un utilisateur entreprise de créer des entreprises","status":"failed","title":"ne devrait pas permettre à un utilisateur entreprise de créer des entreprises"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","POST /api/entreprises"],"duration":282,"failureMessages":["Error: expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:382:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Tests d'Intégration CRUD Entreprise POST /api/entreprises devrait valider les champs obligatoires pour la création","status":"failed","title":"devrait valider les champs obligatoires pour la création"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","DELETE /api/entreprises/:id"],"duration":362,"failureMessages":[],"fullName":"Tests d'Intégration CRUD Entreprise DELETE /api/entreprises/:id devrait supprimer une entreprise pour l'administrateur","status":"passed","title":"devrait supprimer une entreprise pour l'administrateur"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","DELETE /api/entreprises/:id"],"duration":339,"failureMessages":["Error: expected 403 \"Forbidden\", got 200 \"OK\"\n    at Object.expect (D:\\api-gestion-main\\New folder\\server\\tests\\integration\\entreprises\\entreprise.crud.test.js:409:10)\n    at Promise.finally.completed (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\api-gestion-main\\New folder\\server\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Tests d'Intégration CRUD Entreprise DELETE /api/entreprises/:id ne devrait pas permettre à un utilisateur entreprise de supprimer des entreprises","status":"failed","title":"ne devrait pas permettre à un utilisateur entreprise de supprimer des entreprises"},{"ancestorTitles":["Tests d'Intégration CRUD Entreprise","DELETE /api/entreprises/:id"],"duration":368,"failureMessages":[],"fullName":"Tests d'Intégration CRUD Entreprise DELETE /api/entreprises/:id devrait retourner 404 pour une entreprise inexistante lors de la suppression","status":"passed","title":"devrait retourner 404 pour une entreprise inexistante lors de la suppression"}]}],"config":{"bail":0,"changedFilesWithAncestor":false,"ci":false,"collectCoverage":false,"collectCoverageFrom":["controllers/**/*.js","models/**/*.js","utils/**/*.js","middleware/**/*.js","routes/**/*.js","!**/node_modules/**","!**/coverage/**"],"coverageDirectory":"D:\\api-gestion-main\\New folder\\server\\coverage","coverageProvider":"babel","coverageReporters":["text","lcov","html","json"],"coverageThreshold":{"global":{"branches":80,"functions":80,"lines":80,"statements":80}},"detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":false,"expand":false,"findRelatedTests":false,"forceExit":true,"json":false,"lastCommit":false,"listTests":false,"logHeapUsage":false,"maxConcurrency":5,"maxWorkers":7,"noStackTrace":false,"nonFlagArgs":[],"notify":false,"notifyMode":"failure-change","onlyChanged":false,"onlyFailures":false,"openHandlesTimeout":1000,"passWithNoTests":false,"projects":[],"reporters":[["default",{}],["D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-html-reporters\\index.js",{"publicPath":"./test-reports","filename":"rapport-test.html","pageTitle":"Rapport de Tests API","openReport":false,"expand":true,"hideIcon":false,"customInfos":[{"title":"Projet","value":"API de Gestion"},{"title":"Environnement","value":"Test"}]}],["D:\\api-gestion-main\\New folder\\server\\node_modules\\jest-junit\\index.js",{"outputDirectory":"test-reports","outputName":"rapport-junit.xml","suiteName":"Tests API","classNameTemplate":"{classname}","titleTemplate":"{title}","ancestorSeparator":" › ","usePathForSuiteName":"true"}]],"rootDir":"D:\\api-gestion-main\\New folder\\server","runInBand":false,"runTestsByPath":false,"seed":-2106714690,"skipFilter":false,"snapshotFormat":{"escapeString":false,"printBasicPrototype":false},"testFailureExitCode":1,"testPathPatterns":{"patterns":[],"type":"TestPathPatterns"},"testSequencer":"D:\\api-gestion-main\\New folder\\server\\node_modules\\@jest\\test-sequencer\\build\\index.js","testTimeout":30000,"updateSnapshot":"new","useStderr":false,"verbose":true,"waitForUnhandledRejections":false,"watch":false,"watchAll":false,"watchman":true,"workerThreads":false},"endTime":1761493285122,"_reporterOptions":{"publicPath":"./test-reports","filename":"rapport-test.html","expand":true,"pageTitle":"Rapport de Tests API","hideIcon":false,"customInfos":[{"title":"Projet","value":"API de Gestion"},{"title":"Environnement","value":"Test"}],"testCommand":"","openReport":false,"failureMessageOnly":0,"enableMergeData":false,"dataMergeLevel":1,"inlineSource":false,"urlForTestFiles":"","darkTheme":false,"includeConsoleLog":false,"stripSkippedTest":false},"logInfoMapping":{},"attachInfos":{}})